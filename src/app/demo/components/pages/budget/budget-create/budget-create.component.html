<div class="form-container">
  <div class="budget-create">
    <h2>Crear Presupuesto</h2>
    <form (ngSubmit)="onSubmit()" #budgetForm="ngForm" class="form">
      
      <div class="form-group buttons-group">
        <button pButton type="button" label="Agregar Detalle" icon="pi pi-plus" (click)="showModal()" class="p-button-primary"></button>
      </div>
      
      <div class="form-group">
        <label for="total">Total</label>
        <p-inputNumber id="total" name="total" [(ngModel)]="budget.finalTotal" mode="currency" currency="USD" disabled></p-inputNumber>
      </div>
      
      <div class="form-group buttons-group">
        <button pButton type="submit" label="Guardar" icon="pi pi-check" class="p-button-primary"></button>
        <button pButton type="button" label="Cancelar" icon="pi pi-times" routerLink="/pages/budget/detail" class="p-button-secondary"></button>
      </div>
    </form>
  </div>
</div>

<p-dialog header="Agregar Detalle de Presupuesto" [(visible)]="displayModal" [modal]="true">
  <form (ngSubmit)="addDetail()" #detailForm="ngForm">
    <div class="form-group">
      <label for="service">Servicio</label>
      <p-dropdown id="service" name="service" [(ngModel)]="selectedService" [options]="services" placeholder="Seleccione un servicio" required (onChange)="onServiceChange()"></p-dropdown>
    </div>
    <div class="form-group">
      <label for="observations">Observaciones</label>
      <p-inputTextarea id="observations" name="observations" [(ngModel)]="budgetDetail.observations"></p-inputTextarea>
      <!--<input type="text" pInputTextTarea id="observations" name="observations" [(ngModel)]="budgetDetail.observations">-->
    </div>
    <div class="form-group">
      <label for="discount">Descuento</label>
      <p-inputNumber id="discount" name="discount" [(ngModel)]="budgetDetail.discount" mode="decimal" [min]="0" (onChange)="calculateTotal()"></p-inputNumber>
    </div>
    <div class="form-group">
      <label for="total">Costo</label>
      <p-inputNumber id="total" name="total" [(ngModel)]="budgetDetail.cost" mode="currency" currency="USD" disabled></p-inputNumber>
    </div>
    <div class="form-group buttons-group">
      <button pButton type="submit" label="Agregar" icon="pi pi-check" class="p-button-primary"></button>
      <button pButton type="button" label="Cancelar" icon="pi pi-times" (click)="hideModal()" class="p-button-secondary"></button>
    </div>
  </form>
</p-dialog>
